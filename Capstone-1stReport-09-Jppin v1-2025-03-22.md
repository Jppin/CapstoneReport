<!-- Template for PROJECT REPORT of CapstoneDesign 2025-2H, initially written by khyoo -->
<!-- 본 파일은 2025년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info
| (1) 과제명 | *임산부 대상 복약정보 연동·RAG 기반 개인맞춤형 영양보충 가이드 시스템* |
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 09-Jppin |
| (3) 팀 구성원 | 강명진(2217001): 리더, FE/BE<br> 김주예(2076086): 팀원, FE/BE <br> 유현서(2271041) : 팀원, FE/BE			 |
| (4) 팀 지도교수 | 심재형 교수님 |
| (5) 과제 분류 | 산학 |
| (6) 과제 키워드 | 임산부, RAG, 맞춤형 영양보충 가이드, 의약품 복용 내역  |
| (7) 과제 내용 요약 | 본 프로젝트는 임산부를 위한 맞춤형 영양 성분 추천과 식단 섭취 가이드 서비스를 개발하는 것을 목표로 한다.<br>사용자의 건강 상태와 임신 주차 정보를 바탕으로, 권장 및 주의가 필요한 영양소를 도출하고 이에 따라 개인 맞춤형 식단 가이드를 생성한다.<br>또한, 약물과 영양소 간의 상호작용까지 고려하여 더욱 정밀한 영양 관리가 가능하도록 설계되었다.<br>이를 통해 임산부는 효율적으로 영양을 관리하고, 건강한 임신을 유지할 수 있으며,<br>최종적으로는 정보 접근성과 사용 편의성을 높여 보다 쉽고 정확한 건강관리를 실현하는 것을 지향한다. |

<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 | **Pain Point**<br>1. **개인 맞춤 영양성분 추천의 부재**: 임산부는 임신 주차 및 개인 건강 상태에 따라 필요한 영양 성분이 달라지지만, 현재 대부분의 정보는 일률적이며 일반화되어 있다. 이로 인해 개별적인 요구를 반영한 맞춤형 추천이 부족하고, 본인에게 필요한 정보나 가이드를 스스로 찾아야 하는 어려움이 있다.<br>2. **복잡한 영양·식단 관리의 어려움**: 약물 복용과 영양소 간 상호작용을 함께 고려하며 균형 잡힌 식단을 구성하기란 일반 사용자에게 매우 어렵다. 특히 임산부는 하루 영양 섭취 가이드를 스스로 짜기 어려우며, 복잡한 조건(약물, 질환, 영양 균형 등)을 고려한 체계적인 관리 시스템이 부족하다.<br>3. **건강 관심사 반영 부족**: 임산부마다 체중 관리, 특정 영양소 보충, 기저 질환 또는 임신 합병증 등 다양한 건강 관심사가 존재하지만, 기존 서비스들은 이를 충분히 반영하지 못한다. 이에 따라 개인화된 정보 제공이 어려워지고, 본인에게 적합한 영양 가이드를 찾는 데 한계가 있다.<br><br>**Target Customer 정의**<br>1. **대상**: 임신 중 본인과 태아의 건강에 높은 관심을 가지며, 개인 건강 상태나 복용 약물, 건강 고민 등을 고려한 **맞춤형 영양성분 및 식단 가이드**가 필요한 임산부.<br>예: 임신성 당뇨, 고혈압, 철분 결핍 등 합병증을 겪고 있거나 약물을 복용 중인 경우.<br>2. **고객의 필요성**: 임신 삼분기별로 변화하는 영양 요구와 약물-영양소 상호작용을 함께 고려한 **정확하고 신뢰할 수 있는 가이드**가 필요하다. 임산부는 ‘무엇을, 어떻게, 얼마나’ 섭취해야 하는지에 대한 명확한 정보를 원하며, 기존의 일괄적인 정보로는 이를 충족하기 어렵다. 따라서 **개인 건강 정보에 기반한 영양 추천과 섭취 가이드를 제공하는 맞춤형 시스템**이 필요하다. |
| (2) 기존연구와의 비교 | **기존 서비스와 차별점**<br>기존 임산부 관련 앱들은 주로 일반적인 정보 제공, 전문가 상담, 기록 기능 위주로 구성되어 있으며, 사용자가 직접 질문하거나 정보를 검색해야 원하는 내용을 얻는 방식이다. 일부 앱은 매주 아기 발달 정보, 출산 준비물 리스트 등을 제공하지만, **개인의 건강 상태와 임신 주차에 따른 맞춤형 정보는 부족**한 편이다.<br><br>이에 비해 본 서비스는 사용자의 건강 정보(질환, 임신 주차, 약물 복용 등)를 바탕으로 **자동화된 맞춤형 영양 성분 추천과 식단 가이드를 제공**한다. 사용자가 별도로 질문하지 않아도 현재 상태에 맞는 정보가 사전 제공되며, 실시간으로 권장 영양소와 주의 성분, 식단 예시를 카드 형태로 확인할 수 있다.<br><br>예를 들어, 임신 12주차에 접어든 사용자는 태반 형성을 돕기 위한 철분 섭취 가이드를 자동으로 제공받을 수 있고, 복용 중인 약물이 비타민 B12 흡수를 저해하는 경우 주의 카드도 함께 표시되어 보다 정밀한 영양 관리가 가능하다.<br><br>**본 서비스의 장점**<br>1. **자동화된 개인 맞춤형 정보 제공**: 일반적인 정보에 그치지 않고, 사용자의 건강 상태와 임신 주차를 기반으로 한 **즉시 활용 가능한 가이드**를 자동 제공하여 정보 탐색의 번거로움을 줄여준다.<br>2. **심층적이고 통합적인 영양 관리**: 단순 추천을 넘어, **약물-영양소 상호작용**과 개인 건강 고민을 종합 반영하여 보다 정밀한 맞춤형 가이드를 제공한다. |
| (3) 제안 내용 | 1. 식단–영양소–영양제 연결형 상세 가이드 제공: 사용자 건강 상태 및 복약 정보를 바탕으로, 섭취해야 할 영양소와 피해야 할 성분을 연결하여 설명하고, 금기 사항과 복약 주의사항까지 함께 안내함<br>2. 임신 주차와 개인 건강 기록(복약 정보, 건강 고민, 임신 합병증 여부 등)에 기반한 섭취 가이드를 자동 생성하여, 개인 상황에 맞는 정보를 실시간 제공함<br>3. 영양소 추천 결과를 반영해 맞춤형 식단을 구성하고, 각 식사에 포함된 성분과 섭취 이유를 함께 안내하는 상세 식단 가이드를 제공함<br>4. 텍스트 정보만으로 부족한 경우를 보완하기 위해, 사용자의 건강 관심 키워드 기반 YouTube 영상 추천 기능을 통해 정보 탐색을 유도하고 앱 내 재생 기능을 제공함 |
| (4) 기대효과 및 의의 | 본 프로젝트는 임산부의 건강 관리와 영양 섭취에 있어 기존 시스템의 한계를 넘어, 개인 건강 상태와 임신 주차를 반영한 **맞춤형 정보 제공**에 중점을 둔다.<br>특히, 삼분기별 변화하는 영양 요구와 개별 건강 관심사를 반영하여 **영양소 추천과 식단 가이드**를 자동 생성함으로써, 보다 정확하고 체계적인 영양 관리가 가능하다.<br>이를 통해 임산부가 겪는 복잡한 정보 탐색과 영양 설계의 부담을 줄이고, 실질적인 건강 관리에 도움을 줄 수 있다는 점에서 **현실적인 활용 가치와 사회적 의의**를 갖는다. |
| (5) 주요 기능 리스트 | **복약과 영양의 통합 관리**<br>1. OCR 기반 복약 정보 수집, 파싱 및 DB화<br>2. 약물–영양소 간 상호작용 분석 및 충돌 알림 제공<br>3. 사용자 개인 복약/영양제 정보 조회 기능 제공<br><br>**개인 맞춤형 가이드 제공**<br>1. 임신 주차, 건강 상태 등 사용자 정보 입력 및 수정 기능<br>2. 보유 정보를 바탕으로 프롬프트 엔지니어링을 활용한 맞춤 복용 가이드 생성<br><br>**신뢰성 있는 정보 기반 설계**<br>1. 검증된 데이터셋을 활용한 RAG 구축 및 설명 카드 자동 생성<br>2. 영양성분 및 약품 관련 상세 정보 열람 기능<br><br>**가이드 콘텐츠 확장 기능**<br>1. 사용자 관심 키워드를 기반으로 한 유튜브 영상 추천 및 앱 내 재생 기능 제공 |

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---|:---|
| **(1) 요구사항 정의** | 임산부 대상의 복약 기반 맞춤형 영양 가이드를 제공하기 위해, 기능별 요구사항, 클래스 구조, 사용자 흐름, DB 설계를 바탕으로 요구사항을 정의하였다.<br><br>**1. 기능별 상세 요구사항**<br>- 건강 정보 입력 (임신 여부, 주차, 질환, 건강고민 등)<br>- 복약 정보 입력 및 OCR 기반 약물 성분 추출<br>- 권장/주의 성분 분류 및 카드 제공<br>- 설명 카드 제공<br>- RAG 기반 식단 가이드 및 보충 가이드 제공<br>- 관심 키워드 기반 YouTube 영상 추천 및 재생<br><br>![유스케이스 다이어그램](https://raw.githubusercontent.com/Jppin/CapstoneReport/main/images/UseCase.png)<br><br>**2. 클래스 및 DB 설계 요약**<br>- 핵심 클래스는 User, Medicine, Nutrient, GuideText, Recommendation, FoodGuide, Video로 구성되며, 각 기능별 역할에 따라 분리됨<br><br>![ERD](https://raw.githubusercontent.com/Jppin/CapstoneReport/main/images/ERD.png) |
| **(2) 전체 시스템 구성** | 본 시스템은 React Native 앱과 Node.js 서버를 중심으로 구성되며, OCR, GPT, YouTube API 등 외부 서비스를 연동하여 사용자 맞춤형 정보를 제공한다.<br><br>**주요 구성 요소 및 역할**<br>- React Native 앱: 사용자 입력, 카드 UI 제공<br>- Node.js + Express: 추천/가이드 처리, API 통신<br>- MongoDB: 사용자, 약물, 성분 데이터 저장<br>- Redis: 세션 및 추천 결과 캐싱<br>- CLOVA OCR: 약물명 텍스트 추출<br>- LangChain + GPT: 설명 텍스트 사전 생성<br>- YouTube API: 건강 콘텐츠 추천<br>- GitHub Actions: CI/CD 자동 배포<br><br>**시스템 아키텍처**<br>![시스템 아키텍처](https://raw.githubusercontent.com/Jppin/CapstoneReport/main/images/System_Architecture.png) |
| **(3) 주요엔진 및 기능 설계** | **1. 복약 정보 분석 및 추천 모듈**<br>- 사용자가 업로드한 복약 이미지에서 텍스트를 추출하기 위해, Node.js 서버는 Naver CLOVA OCR API를 호출함<br>- 텍스트 결과에서 약물명을 파싱하고, 사전에 등록된 약물 성분 DB에서 관련 성분 정보를 가져옴<br>- 사용자 건강정보(임신 주차, 질환 등)와 매칭하여 권장 또는 주의 성분으로 분류하고, 각 카드에 사유와 함께 표시함<br><br>**2. 설명 카드 생성 모듈**<br>- 권장/주의로 분류된 영양소에 대해 사전에 생성된 설명 텍스트를 불러와 카드 형태로 제공함<br>- 설명은 해당 영양소가 왜 필요한지, 어떤 상황에서 주의해야 하는지를 요약하고 있으며, 사용자 상태에 따라 텍스트를 조건 분기하여 출력함<br><br>**3. RAG 기반 식단 및 섭취 가이드 생성 모듈**<br>- 사용자의 건강정보와 권장 영양소를 기반으로 LangChain 기반 RAG 구조를 활용하여 하루 식단 가이드를 생성함<br>- RAG는 내부에 구성된 임산부 식단 자료와 의학적 참조 문서를 벡터 DB에 임베딩한 후, 사용자의 상황에 맞는 문서를 검색해 GPT에 전달<br>- 이를 통해 아침/점심/저녁/간식 시간대별 식사 예시와 섭취 이유가 포함된 안내 문장을 생성함<br>- 이후, 식단만으로는 부족할 수 있는 성분이 있는 경우, 해당 성분에 대해 별도의 보충 섭취 가이드를 자동 생성하여 제공함<br>- 보충 가이드는 성분의 역할, 섭취 시기, 관련 식품이나 영양제 정보 등을 포함함<br><br>**4. 영상 추천 모듈**<br>- 사용자가 입력한 관심 키워드를 기반으로 YouTube API를 호출하여 건강 콘텐츠를 검색함<br>- 앱 내에서는 추천 영상 썸네일과 제목이 리스트 형태로 표시되며, 클릭 시 iframe 방식으로 바로 재생됨<br><br>**5. 캐시 및 세션 관리**<br>- Redis를 이용하여 로그인 세션 유지, OCR 결과 캐싱, 설명 카드 결과 캐싱 등을 수행함<br>- 동일한 사용자의 반복 요청에 대해 빠른 응답이 가능하도록 처리 |
| **(4) 주요 기능의 구현** | **[기능 1] OCR 기반 복약 정보 등록**<br>- 사용자가 약봉투 사진을 앱에서 업로드하면 서버가 Naver CLOVA OCR API를 통해 텍스트를 추출<br>- 텍스트 결과를 파싱하여 의약품명을 식별하고, 내부 DB에서 해당 약물의 주요 성분 정보를 불러옴<br>- 이 성분 정보를 바탕으로 사전에 정의된 '권장/주의 영양소 매칭표'와 비교하여 분석함<br>- 예시: '메트포르민' 성분이 인식되면, 해당 성분이 '비타민 B12'와 충돌한다고 사전에 정의되어 있으므로, '비타민 B12'가 주의 카드로 분류됨<br><br>**[기능 2] RAG 기반 식단 생성 및 보충 섭취 가이드 제공**<br>- 사용자 건강정보 및 권장 영양소 정보를 기반으로, LangChain RAG 구조를 통해 하루 식단 및 섭취 가이드 문장을 생성함<br>- RAG는 공신력 있는 임산부 영양 가이드 문서와 식단 예시 자료를 기반으로 식사 시간대별(아침, 점심, 저녁, 간식) 구성 가능한 식단을 생성함<br>- 식단은 사용자의 임신 주차 및 건강고민 카테고리에 적합한 식재료와 조리방식 등을 고려하여 작성되며, 각 식사별로 안내 카드 형태로 출력됨<br>- 이후, 식단에 포함되지 않았거나 부족할 수 있는 주요 성분이 감지되면, 해당 성분에 대한 보충 섭취 가이드를 추가로 생성함<br>- 이 가이드는 ‘왜 필요한지’, ‘언제 섭취해야 하는지’, ‘어떤 식품 또는 영양제로 보충 가능한지’ 등의 설명이 포함된 카드로 사용자에게 제공 |
| **(5) 기타** | - 약물 파싱 결과가 복잡한 경우, JSON 형태로 변환하는 절차에서 GPT를 보조적으로 활용할 수 있음 |
<br>
