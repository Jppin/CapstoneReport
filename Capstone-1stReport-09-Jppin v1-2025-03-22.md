<!-- Template for PROJECT REPORT of CapstoneDesign 2025-2H, initially written by khyoo -->
<!-- 본 파일은 2025년도 컴공 졸업프로젝트의 <1차보고서> 작성을 위한 기본 양식입니다. -->
<!-- 아래에 "*"..."*" 표시는 italic체로 출력하기 위해서 사용한 것입니다. -->
<!-- "내용"에 해당하는 부분을 지우고, 여러분 과제의 내용을 작성해 주세요. -->

# Team-Info
| (1) 과제명 | *임산부를 위한 복약정보 연동, RAG 기반, 개인맞춤형 영양보충 가이드 시스템* |
|:---  |---  |
| (2) 팀 번호 / 팀 이름 | 09-Jppin |
| (3) 팀 구성원 | 강명진(2217001): 리더, FE/BE<br> 김주예(2076086): 팀원, FE/BE <br> 유현서(2271041) : 팀원, FE/BE			 |
| (4) 팀 지도교수 | 심재형 교수님 |
| (5) 과제 분류 | 산학 |
| (6) 과제 키워드 | 임산부, RAG, 맞춤형 영양보충 가이드, 의약품 복용 내역  |
| (7) 과제 내용 요약 | 이 프로젝트는 임산부들을 위한 맞춤형 영양 성분 추천과 식단섭취 가이드 서비스를 개발하는 것이다. <br>사용자의 개인 건강 상태와 임신 주차에 맞춰 영양 성분과 식단 가이드를 생성해 사용자에게 적시적절한 추천을 한다. 또한, 약물과 영양소 간의 상호작용을 고려해 개인화된 영양 관리를 제공한다. <br>이를 통해 임산부가 더 효율적으로 영양을 관리하고, 건강한 임신을 유지할 수 있도록 지원한다. <br>최종 목표는 정보의 접근성과 사용 편의성을 높여 임산부들이 보다 쉽고 정확한 영양섭취와 건강관리를 할 수 있게 돕는 것이다. |
<br>

# Project-Summary
| 항목 | 내용 |
|:---  |---  |
| (1) 문제 정의 |**Pain Point** <br>1. 개인 맞춤 영양성분 부족:  임산부들은 임신 주차에 따라  변화하는 영양 요구와 개인 건강 상태에 맞춰 영양 성분을 섭취해야 하지만, 대부분 일률적인 영양 정보만 제공한다. 각 임산부의 개별적 요구 사항을 고려한 맞춤형 영양 성분 추천이 부족하여, 자신에게 맞는 정보나 가이드를 찾기 어렵다.<br>2. 복잡한 영양 관리와 식단 관리 부족:  약물 복용과 영양소의 상호작용까지 고려하면서 여러 가지 영양소 간의 균형을 맞춰주는 맞춤형 관리 시스템이 부족하다. 이런 상황에 임산부들은 어떤 영양소를 어떻게 섭취해야 하는지 혼자 파악하는 것에 어려움을 느낀다. 또한, 균형 잡힌 식단을 짜고 영양소의 정확한 섭취와 건강한 식사를 구성하는 데 필요한 구체적인 식단 가이드를 스스로 생성하는 건 무리가 있다.<br>3. 건강 관심사 반영 부족: 임산부는 각기 다른 건강 관심사(예: 체중 관리, 특정 영양소 부족 등)가 있으나 기존 시스템은 이를 개인화된 추천으로 반영하지 못하고, 기저 질환이나 임신 합병증에 맞는 영양 관리에 대한 정보 제공이 부족하다.<br><br>**Target Customer 정의**<br>1. 대상: 임산부 중 태아의 건강과 산모 본인의 건강에 대한 높은 관심도를 가지고 있어 임신 기간 동안의 개인 건강 상태와 관심사에 맞춘 영양성분 추천과 섭취가이드가 필요한 여성들. 특별히, 임신 합병증(예: 임신성 당뇨, 고혈압 등)이나 약물 복용 또는 특별한 건강 고민을 가지고 있는 임산부들.<br>2. 고객의 필요성 : 임산부들은 각 임신 삼분기에 따라 요구되는 영양소가 달라지며, 이를 효율적으로 관리하는데 어려움을 겪는다. 무엇을, 어떻게, 어떤 영양소를 섭취해야 할지에 대한 명확한 가이드가 부족하고, 임신 중 약물 복용이나 특정 건강 상태에 따른 영양소의 상호작용을 고려한 정보가 필요하다. 이러한 어려움을 해결하기 위해 맞춤형 영양성분 추천과 개인화된 식단 가이드를 제공하는 서비스가 필요하다. |
| (2) 기존연구와의 비교 |**기존 서비스와 차별점** <br>기존의 임산부 앱들은 주로 일반적인 정보 제공, 전문가 상담, 기록 기능 등을 중심으로 사용자가 질문하거나 직접 정보를 검색해야 하는 방식으로 운영된다. 비슷한 기능을 가진 타 앱들은 임산부에게 매주 아기 발달 정보나 출산 준비물 리스트 등을 제공하지만, 각 개인의 건강 상태와 임신 주차에 따른 맞춤형 정보는 부족하다. 사용자가 직접 묻거나 검색해야만 필요한 정보나 가이드를 얻을 수 있어, 즉각적인 정보 제공이 어렵다. 반면, 우리 서비스는 사용자의 개인 건강 상태와 임신 주차에 맞춘 맞춤형 영양 성분 추천과 식단 가이드를 자동으로 제공한다. 사용자가 질문을 하지 않더라도, 임신 주차에 맞는 필요한 영양소와 식단 가이드를 미리 제공하여, 임산부가 실시간으로 바로 필요한 정보를 제공받을 수 있도록 돕는다. 예를 들어, 임신 주차마다 변화하는 영양 요구에 따라 자동으로 맞춤형 정보가 제공되어, 임산부는 자신의 건강 상태에 맞는 구체적인 정보를 빠르고 쉽게 얻을 수 있다.<br><br>**본 서비스의 장점**<br>1. 자동화된 맞춤형 정보 제공: 기존 앱들은 주로 일반적인 정보를 제공하나, 본 서비스는 사용자 개인 건강 상태와 임신 주차에 맞춰 맞춤형 영양 성분 추천과 식단 가이드를 자동으로 제공하여, 임산부가 정보를 찾는 데 소요되는 시간과 노력을 줄인다.<br>2. 심층적이고 종합적인 영양 관리: 본 서비스는 약물 복용과 특정 건강 상태를 반영하여 영양소 간 상호작용을 고려한 종합적인 영양 가이드를 제공한다. |
| (3) 제안 내용 |1. 식단-영양소-영양제 연결형 상세 가이드 제공, 금기 정보와 복약 주의사항 안내 <br>2. 임신 주차, 개인 건강 기록(복약 정보, 건강 고민, 임신 합병증 여부 등)에 기반한 섭취 가이드 생성 <br>3. 영양성분 추천에 따른 맞춤 식단 생성과 식단기반 상세가이드 제공 <br>4. 텍스트로만 제공되는 정보 보완을 위한 맞춤 유튜브 영상 추천 기능으로 사용자 정보 탐색 유도 |
| (4) 기대효과 및 의의 | 이 프로젝트는 임산부들의 건강 관리와 영양 섭취에 대한 실질적인 문제를 해결하기 위해, 기존의 일반적인 정보 제공에 그치는 시스템을 넘어서 개인화된 맞춤형 서비스를 제공하는 데 중점을 두고 있다.<br>이 서비스는 임산부들의 건강한 임신을 지원하며, 특히 삼분기별 변화하는 영양 요구와 개인적인 건강 관심사를 반영한 맞춤형 영양 추천과 이를 기반으로 식단 가이드까지 생성해줌으로써 더욱 정확한 영양 관리를 가능하게 한다.<br>본 프로젝트는 임산부의 복잡한 영양 관리와 정보 습득의 어려움을 해소해주고 그들의 부담을 덜어주는 데에에 중요한 의미를 갖는다. |
| (5) 주요 기능 리스트 |**복약과 영양의 통합관리** <br> 1. OCR 기반 복약정보 수집, 파싱 및 DB화 <br> 2. 약물-영양제 상호작용 분석,충돌 알림 기능 <br>3. 사용자 개인 복약/영양제 정보 조회 기능 <br>**개인 맞춤형 가이드** <br>1. 임신 주차, 건강 상태등 사용자 정보 입력 및 수정 기능 <br>2. 보유정보와 프롬프트 엔지니어링 활용으로 개인화된 복용가이드 생성 <br>**신뢰성 있는 정보 제공** <br>1. 검증된 데이터셋 기반 RAG 구축을 통한 가이드 생성 <br>2. 영양성분, 약품 관련 상세정보 제공 기능 <br>**가이드 관련 콘텐츠 제공** <br>사용자 관심 키워드 기반 유튜브 영상 추천 기능|

<br>
 
# Project-Design & Implementation
| 항목 | 내용 |
|:---|:---|
| **(1) 요구사항 정의** | **1. 기능별 상세 요구사항**<br>- 운동 빈도, 임신 여부/주차, 입덧 여부, 만성질환, 건강고민(카테고리별) 키워드 입력<br>- 복약 정보 OCR 등록 및 파싱<br>- 사용자 정보 + 약물 성분 기반 영양소 추천/주의 분류<br>- 사전 생성된 설명 텍스트를 카드에 함께 표시<br>- 앱 제공 식단의 성분 충족률 시각화<br>- 부족 성분에 대한 보충 가이드 카드 제공<br>- 관심 키워드 기반 YouTube 영상 추천<br><br>**2. 설계 모델 (클래스/모듈)**<br>- User, Medicine, Nutrient, Recommendation, GuideText, FoodGuide, Video 등으로 구성<br>- 각 클래스는 주요 필드와 메서드를 갖고, 역할에 따라 모듈화됨<br><br>**3. UI 흐름 요약**<br>- 홈: 추천/주의 영양소 카드<br>- 식단: 충족률 + 보충 가이드<br>- 영상: 추천 콘텐츠 목록 + iframe 재생<br><br>**4. DB 모델 (ERD 요약)**<br>- 주요 테이블: User, Medicine, Nutrient, Recommendation, FoodGuide, Video<br>- 관계: User ↔ Medicine / Nutrient ↔ Recommendation 등<br><br>※ 상세 ERD는 보고서 본문 이미지 참조 |
| **(2) 전체 시스템 구성** | 본 시스템은 React Native 앱과 Node.js 서버를 중심으로 구성되며, OCR, GPT, YouTube API 등 외부 서비스를 연동하여 사용자 맞춤형 정보를 제공한다.<br><br>**주요 구성 요소 및 역할**<br>- React Native 앱: 사용자 입력, 카드 UI 제공<br>- Node.js + Express: 추천/가이드 처리, API 통신<br>- MongoDB: 사용자, 약물, 성분 데이터 저장<br>- Redis: 세션 및 추천 결과 캐싱<br>- CLOVA OCR: 약물명 텍스트 추출<br>- LangChain + GPT: 설명 텍스트 사전 생성<br>- YouTube API: 건강 콘텐츠 추천<br>- GitHub Actions: CI/CD 자동 배포<br><br>**시스템 아키텍처**<br>![시스템 아키텍처](https://raw.githubusercontent.com/Jppin/CapstoneReport/main/images/System_Architecture.png) |
| **(3) 주요엔진 및 기능 설계** | **1. 복약 정보 분석 및 추천 모듈**<br>- 사용자가 업로드한 복약 이미지에서 텍스트를 추출하기 위해, Node.js 서버는 Naver CLOVA OCR API를 호출함<br>- 텍스트 결과에서 약물명을 파싱하고, 사전에 등록된 약물 성분 DB에서 관련 성분 정보를 가져옴<br>- 사용자 건강정보(임신 주차, 질환 등)와 매칭하여 권장 또는 주의 성분으로 분류하고, 각 카드에 사유와 함께 표시함<br><br>**2. 설명 카드 생성 모듈**<br>- 권장/주의로 분류된 영양소에 대해 사전에 생성된 설명 텍스트를 불러와 카드 형태로 제공함<br>- 설명은 해당 영양소가 왜 필요한지, 어떤 상황에서 주의해야 하는지를 요약하고 있으며, 사용자 상태에 따라 텍스트를 조건 분기하여 출력함<br><br>**3. RAG 기반 식단 및 섭취 가이드 생성 모듈**<br>- 사용자의 건강정보와 권장 영양소를 기반으로 LangChain 기반 RAG 구조를 활용하여 하루 식단 가이드를 생성함<br>- RAG는 내부에 구성된 임산부 식단 자료와 의학적 참조 문서를 벡터 DB에 임베딩한 후, 사용자의 상황에 맞는 문서를 검색해 GPT에 전달<br>- 이를 통해 아침/점심/저녁/간식 시간대별 식사 예시와 섭취 이유가 포함된 안내 문장을 생성함<br>- 이후, 식단만으로는 부족할 수 있는 성분이 있는 경우, 해당 성분에 대해 별도의 보충 섭취 가이드를 자동 생성하여 제공함<br>- 보충 가이드는 성분의 역할, 섭취 시기, 관련 식품이나 영양제 정보 등을 포함함<br><br>**4. 영상 추천 모듈**<br>- 사용자가 입력한 관심 키워드를 기반으로 YouTube API를 호출하여 건강 콘텐츠를 검색함<br>- 앱 내에서는 추천 영상 썸네일과 제목이 리스트 형태로 표시되며, 클릭 시 iframe 방식으로 바로 재생됨<br><br>**5. 캐시 및 세션 관리**<br>- Redis를 이용하여 로그인 세션 유지, OCR 결과 캐싱, 설명 카드 결과 캐싱 등을 수행함<br>- 동일한 사용자의 반복 요청에 대해 빠른 응답이 가능하도록 처리 |
| **(4) 주요 기능의 구현** | **[기능 1] OCR 기반 복약 정보 등록**<br>- 사용자가 약봉투 사진을 앱에서 업로드하면 서버가 Naver CLOVA OCR API를 통해 텍스트를 추출<br>- 텍스트 결과를 파싱하여 의약품명을 식별하고, 내부 DB에서 해당 약물의 주요 성분 정보를 불러옴<br>- 이 성분 정보를 바탕으로 사전에 정의된 '권장/주의 영양소 매칭표'와 비교하여 분석함<br>- 예시: '메트포르민' 성분이 인식되면, 해당 성분이 '비타민 B12'와 충돌한다고 사전에 정의되어 있으므로, '비타민 B12'가 주의 카드로 분류됨<br><br>**[기능 2] RAG 기반 식단 생성 및 보충 섭취 가이드 제공**<br>- 사용자 건강정보 및 권장 영양소 정보를 기반으로, LangChain RAG 구조를 통해 하루 식단 및 섭취 가이드 문장을 생성함<br>- RAG는 공신력 있는 임산부 영양 가이드 문서와 식단 예시 자료를 기반으로 식사 시간대별(아침, 점심, 저녁, 간식) 구성 가능한 식단을 생성함<br>- 식단은 사용자의 임신 주차 및 건강고민 카테고리에 적합한 식재료와 조리방식 등을 고려하여 작성되며, 각 식사별로 안내 카드 형태로 출력됨<br>- 이후, 식단에 포함되지 않았거나 부족할 수 있는 주요 성분이 감지되면, 해당 성분에 대한 보충 섭취 가이드를 추가로 생성함<br>- 이 가이드는 ‘왜 필요한지’, ‘언제 섭취해야 하는지’, ‘어떤 식품 또는 영양제로 보충 가능한지’ 등의 설명이 포함된 카드로 사용자에게 제공 |
| **(5) 기타** | - 약물 파싱 결과가 복잡한 경우, JSON 형태로 변환하는 절차에서 GPT를 보조적으로 활용할 수 있음 |
<br>
